<div class="flex items-center justify-center min-h-screen">
  <div class="card bg-base-100 w-96 shadow-sm">
    <div class="card-body">
      <h2 class="card-title text-2xl font-bold mb-6">Login to Chronolog</h2>

      <form
        class="grid grid-cols-1 gap-1"
        [formGroup]="loginForm"
        (ngSubmit)="onSubmit()"
      >
        <!--  #region Error message -->
        @if (errorMessageVisible()) {
          <div class="alert alert-error alert-dash">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6 shrink-0 stroke-current"
              fill="none"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"
              />
            </svg>

            <span>{{ errorMessage() }}</span>

            <button
              type="button"
              class="btn btn-xs btn-error btn-square"
              (click)="errorMessage.set(null)"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
          </div>
        }
        <!-- #endregion -->

        <!-- #region Email input -->
        <fieldset class="fieldset">
          <legend class="fieldset-legend">Email</legend>
          <label
            class="input w-full"
            [class.input-error]="
              email.invalid && (email.dirty || email.touched)
            "
          >
            <svg
              class="h-[1em] opacity-50"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
            >
              <g
                stroke-linejoin="round"
                stroke-linecap="round"
                stroke-width="2.5"
                fill="none"
                stroke="currentColor"
              >
                <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
              </g>
            </svg>
            <input
              type="email"
              placeholder="mail@site.com"
              formControlName="email"
              required
            />
          </label>
          @if (email.invalid && (email.dirty || email.touched)) {
            <label class="label pb-0">
              <span class="label-text-alt text-error">
                @if (email.hasError("required")) {
                  Email is required.
                } @else if (email.hasError("email")) {
                  Must be a valid email.
                }
              </span>
            </label>
          }
        </fieldset>
        <!-- #endregion -->

        <!-- #region Password input -->
        <fieldset class="fieldset">
          <div class="flex justify-between">
            <legend class="fieldset-legend">Password</legend>
            <legend class="fieldset-label">
              <a class="label-text-alt link link-hover link-primary">
                Forgot password?
              </a>
            </legend>
          </div>
          <label
            class="input w-full"
            [class.input-error]="
              password.invalid && (password.dirty || password.touched)
            "
          >
            <svg
              class="h-[1em] opacity-50"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
            >
              <g
                stroke-linejoin="round"
                stroke-linecap="round"
                stroke-width="2.5"
                fill="none"
                stroke="currentColor"
              >
                <path
                  d="M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"
                ></path>
                <circle cx="16.5" cy="7.5" r=".5" fill="currentColor"></circle>
              </g>
            </svg>
            <input
              type="password"
              placeholder="••••••••"
              formControlName="password"
              required
            />
          </label>
          @if (password.invalid && (password.dirty || password.touched)) {
            <label class="label pb-0">
              @if (password.hasError("required")) {
                <span class="label-text-alt text-error">
                  Password is required.
                </span>
              }
            </label>
          }
        </fieldset>
        <!-- #endregion -->

        <!-- #region Login button -->
        <div class="mt-3">
          <button
            type="submit"
            class="btn btn-primary w-full"
            [disabled]="!loginForm.valid"
          >
            @if (submitting()) {
              <span class="loading loading-spinner"></span>
            }
            Login
          </button>
        </div>
        <!-- #endregion -->
      </form>

      <div class="divider">OR</div>

      <div class="text-center">
        <p>Don't have an account?</p>
        <a class="link link-primary">Sign up now</a>
      </div>
    </div>
  </div>
</div>
